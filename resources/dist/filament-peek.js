(()=>{document.addEventListener("alpine:init",()=>{Alpine.data("PeekPreviewModal",t=>({config:t,isOpen:!1,canRotatePreset:!1,activeDevicePreset:null,modalTitle:null,modalStyle:{display:"none"},iframeUrl:null,iframeContent:null,iframeStyle:{width:"100%",height:"100%",maxWidth:"100%",maxHeight:"100%"},init(){this.setDevicePreset()},setIframeDimensions(e,i){this.iframeStyle.maxWidth=e,this.iframeStyle.maxHeight=i,this.config.allowIframeOverflow&&(this.iframeStyle.width=e,this.iframeStyle.height=i)},setDevicePreset(e){e=e||this.config.initialDevicePreset,!!this.config.devicePresets&&(!this.config.devicePresets[e]||!this.config.devicePresets[e].width||!this.config.devicePresets[e].height||(this.setIframeDimensions(this.config.devicePresets[e].width,this.config.devicePresets[e].height),this.canRotatePreset=this.config.devicePresets[e].canRotatePreset||!1,this.activeDevicePreset=e))},isActiveDevicePreset(e){return this.config.shouldShowActiveDevicePreset?this.activeDevicePreset===e:!1},rotateDevicePreset(){let e=this.iframeStyle.maxHeight,i=this.iframeStyle.maxWidth;this.setIframeDimensions(e,i)},onOpenPreviewModal(e){document.body.classList.add("is-filament-peek-preview-modal-open"),this.modalTitle=e.detail.modalTitle,this.iframeUrl=e.detail.iframeUrl,this.iframeContent=e.detail.iframeContent,this.modalStyle.display="flex",this.isOpen=!0,setTimeout(()=>{let i=this.$refs.previewModalBody.querySelector("iframe");!(i&&i.contentWindow)||i.contentWindow.addEventListener("keyup",s=>{s.key==="Escape"&&this.handleEscapeKey()})},500)},onClosePreviewModal(){document.body.classList.remove("is-filament-peek-preview-modal-open"),this.modalStyle.display="none",this.modalTitle=null,this.iframeUrl=null,this.iframeContent=null,this.isOpen=!1},handleEscapeKey(){!this.isOpen||!this.config.shouldCloseModalWithEscapeKey||this.onClosePreviewModal()}}))});})();
